<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SystÃ¨me de SÃ©curitÃ© â€“ Prison</title>

<style>
* {
    box-sizing: border-box;
}


body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top, #1a1f27, #0b0f14);
    color: #e0e0e0;
}

/* ===== Ã‰CRANS ===== */
.screen {
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.hidden {
    display: none !important;
}

/* ===== LOGIN ===== */
.login-box {
    background: #141a22;
    padding: 30px;
    width: 360px;
    border-radius: 10px;
    box-shadow: 0 0 40px rgba(0,0,0,0.6);
    text-align: center;
}

.login-box h2 {
    margin-bottom: 20px;
}

.login-box input,
.login-box button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    background: #0b0f14;
    color: white;
    border: 1px solid #2a3441;
    border-radius: 6px;
}

.login-box button:hover {
    background: #1f2630;
    cursor: pointer;
}

/* ===== APP ===== */
.app {
    padding: 15px;
    display: grid;
    grid-template-columns: 2fr 1fr;
    grid-template-rows: auto auto;
    gap: 15px;
    width: 100%;
    height: 100%;
}

/* BLOCS */
.block {
    background: #141a22;
    border-radius: 10px;
    padding: 10px;
}


/* CAMERAS */
.camera img {
    width: auto;       /* largeur automatique */
    height: 200px;     /* hauteur fixe */
    border-radius: 6px;
    margin-bottom: 5px;
}

/* DETENUS */
.prisoners {
    grid-row: span 2;
}

.prisoners li {
    padding: 8px;
    cursor: pointer;
    border-bottom: 1px solid #2a3441;
}

.prisoners li:hover {
    background: #1f2630;
}

/* INFO */
.locked { color: #ff5f5f; }
.unlocked { color: #5fff9c; }

button {
    padding: 10px;
    width: 100%;
    background: #0b0f14;
    border: 1px solid #2a3441;
    color: white;
    border-radius: 6px;
}

button:hover {
    background: #1f2630;
}

/* ===== VICTOIRE ===== */
#victory-screen {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.victory-box {
    background: #141a22;
    padding: 40px;
    border-radius: 12px;
    text-align: center;
    max-width: 500px;
    box-shadow: 0 0 40px rgba(0,0,0,0.8);
}

.victory-box h1 {
    color: #00ff99;
    margin-bottom: 20px;
}

</style>
</head>

<body>

<!-- ================= Ã‰CRAN VICTOIRE ================= -->
<div id="victory-screen" class="hidden">
    <div class="victory-box">
        <h1>ðŸš¨ Ã‰VASION RÃ‰USSIE ðŸš¨</h1>
        <p>
            Bravo !<br>
            NoÃ© Ã  rÃ©ussi Ã  s'Ã©vader envois cette page au compte insta Mines'terpol
        </p>
        <img src="images/noemerci.jpeg" style="width:150px; margin-bottom:15px;">
        <p> merci hehe </p>
        </p>
        <button onclick="closeVictory()">Retour au systÃ¨me</button>
    </div>
</div>

<!-- ================= Ã‰CRAN LOGIN ================= -->
<div id="login-screen" class="screen">
    <div class="login-box">
        <h2>ME'son d'arrÃªt de Mines'terpol</h2>
        <img src="images/logo.jpg" style="width:150px; margin-bottom:15px;">
        <h2>AccÃ¨s SÃ©curisÃ©</h2>
        <input id="user" placeholder="Identifiant">
        <input id="pass" type="password" placeholder="Mot de passe">
        <button onclick="login()">Connexion</button>
        <p id="error" style="color:red"></p>
    </div>
</div>

<!-- ================= Ã‰CRAN APPLICATION ================= -->
<div id="app-screen" class="screen hidden">
    <div class="app">

        <!-- CAMERAS -->
        <div class="block">
            <h3>CamÃ©ras</h3>

            <div class="camera">
                <img id="cam1" src="images/camera1.gif">
                <button onclick="toggleCam(1)">Activer / Couper</button>
            </div>

            <div class="camera">
                <img id="cam2" src="images/camera2.gif">
                <button onclick="toggleCam(2)">Activer / Couper</button>
            </div>
        </div>

        <!-- DETENUS -->
        <div class="block prisoners">
            <h3>DÃ©tenus</h3>
            <ul>
                <li onclick="selectPrisoner(0)">001 â€“ Hippolyte Cochard</li>
                <li onclick="selectPrisoner(1)">002 â€“ Alexandre Malige</li>
                <li onclick="selectPrisoner(2)">003 â€“ Nicolas Sarkozi</li>
                <li onclick="selectPrisoner(3)">004 â€“ Dimitri Cha</li>
                <li onclick="selectPrisoner(4)">005 â€“ Anouk Desmarescaux</li>
                <li onclick="selectPrisoner(5)">006 â€“ GaÃ«l Perdriau</li>
                <li onclick="selectPrisoner(6)">007 â€“ Thibaut Barbier</li>
                <li onclick="selectPrisoner(7)">008 â€“ Koba LaD</li>
                <li onclick="selectPrisoner(8)">009 â€“ TimothÃ© Chaib</li>
                <li onclick="selectPrisoner(9)">010 â€“ Andrea Borron</li>
                <li onclick="selectPrisoner(10)">011 â€“ NoÃ© Devaux</li>
                <li onclick="selectPrisoner(11)">012 â€“ Linda Frissou</li>
                <li onclick="selectPrisoner(12)">013 â€“ Jonas Richter</li>
                <li onclick="selectPrisoner(13)">015 â€“ Jonas Richter</li>
                <li onclick="selectPrisoner(14)">015 â€“ Jonas Richter</li>
                <li onclick="selectPrisoner(15)">016 â€“ Marius Tchetche</li>
                <li onclick="selectPrisoner(16)">017 â€“ Theodore Mons</li>
                <li onclick="selectPrisoner(17)">018 â€“ Arthur Val Serra</li>
                <li onclick="selectPrisoner(18)">019 â€“ Jonas Richter</li>
                <li onclick="selectPrisoner(19)">020 â€“ Jonas Richter</li>
                <li onclick="selectPrisoner(20)">021 â€“ Jonas Richter</li>

            </ul>
        </div>

        <!-- INFO -->
        <div class="block">
            <h3>Informations dÃ©tenu</h3>
            <p id="infoText">SÃ©lectionnez un dÃ©tenu</p>
            <p id="cellStatus"></p>
            <button id="cellBtn" class="hidden" onclick="toggleCell()">
                Verrouiller / DÃ©verrouiller
            </button>
        </div>

    </div>
</div>

<script>
const USER = "michael.pommier";
const PASS = "soleil";

let cams = [true, true];
let celluleNoeOuverte = false;


let prisoners = [
    { id: "001", name: "Hippolyte Cochard", level: "Haute sÃ©curitÃ©", locked: true },
    { id: "002", name: "Alexandre Malige", level: "Standard", locked: true },
    { id: "003", name: "Nicolas Sarkozi", level: "Deluxe", locked: true },
    { id: "004", name: "Dimitri Cha", level: "Isolement sonor", locked: true },
    { id: "005", name: "Anouk Desmarescaux", level: "Haute sÃ©curitÃ©", locked: true },
    { id: "006", name: "GaÃ«l Perdriau", level: "Isolement", locked: true },
    { id: "007", name: "Thibaut Barbier", level: "Isolement", locked: true },
    { id: "008", name: "Koba LaD", level: "Isolement", locked: true },
    { id: "009", name: "TimothÃ© Chaib", level: "Isolement sonor", locked: true },
    { id: "010", name: "Andrea Borron", level: "EvadÃ©", locked: false },
    { id: "011", name: "NoÃ© Devaux", level: "Haute sÃ©curitÃ©", locked: true },
    { id: "012", name: "Linda Frissou", level: "Haute sÃ©curitÃ©", locked: true },
    { id: "013", name: "Jonas Richter", level: "Isolement", locked: true },
    { id: "014", name: "Jonas Richter", level: "Isolement", locked: true },
    { id: "015", name: "Jonas Richter", level: "Isolement", locked: true },
    { id: "016", name: "Marius Tchetche", level: "Isolement", locked: true },
    { id: "017", name: "Theodore Mons", level: "Isolement", locked: true },
    { id: "018", name: "Arthur Val Serra", level: "zone intankable", locked: true },
    { id: "019", name: "Jonas Richter", level: "Isolement", locked: true },
    { id: "020", name: "Jonas Richter", level: "Isolement", locked: true },
    { id: "021", name: "Jonas Richter", level: "Isolement", locked: true }
];

let selected = null;

// Gardien connectÃ© (simulation)
const currentGuard = {
    name: "Gardien Alpha",
    allowedPrisoners: ["001", "002","011","012","015","016","019"] // IDs autorisÃ©s
};

/* LOGIN */
function login() {
    if (user.value === USER && pass.value === PASS) {
        document.getElementById("login-screen").classList.add("hidden");
        document.getElementById("app-screen").classList.remove("hidden");
    } else {
        error.textContent = "AccÃ¨s refusÃ©";
    }
}

/* CAMERAS */
function toggleCam(n) {
    cams[n-1] = !cams[n-1];
    document.getElementById("cam"+n).src = cams[n-1]
        ? "images/camera"+n+".gif"
        : "images/brouille.gif";
    
    checkVictory();
}

/* DETENU */
function selectPrisoner(i) {
    selected = prisoners[i];

    infoText.innerHTML = `
        <strong>${selected.name}</strong><br>
        ID : ${selected.id}<br>
        Niveau : ${selected.level}
    `;

    const cellBtn = document.getElementById("cellBtn");

    // VÃ©rification des droits
    if (currentGuard.allowedPrisoners.includes(selected.id)) {
        cellBtn.disabled = false;
        cellBtn.textContent = "Verrouiller / DÃ©verrouiller";
    } else {
        cellBtn.disabled = true;
        cellBtn.textContent = "AccÃ¨s non autorisÃ©";
    }

    updateCell();
    cellBtn.classList.remove("hidden");
}


function toggleCell() {
    if (!selected) return;

    // SÃ©curitÃ© supplÃ©mentaire
    if (!currentGuard.allowedPrisoners.includes(selected.id)) {
        alert("AccÃ¨s refusÃ© : autorisation insuffisante");
        return;
    }

    selected.locked = !selected.locked;
    updateCell();
    checkVictory();
}


function updateCell() {
    cellStatus.textContent = selected.locked
        ? "Cellule : VERROUILLÃ‰E"
        : "Cellule : DÃ‰VERROUILLÃ‰E";
    cellStatus.className = selected.locked ? "locked" : "unlocked";
}

function checkVictory() {
    const camerasOff = !cams[0] && !cams[1];
    const noe = prisoners.find(p => p.id === "011");

    if (camerasOff && noe && !noe.locked) {
        document.getElementById("victory-screen").classList.remove("hidden");
    }
}

function closeVictory() {
    document.getElementById("victory-screen").classList.add("hidden");
}


</script>

</body>
</html>
